<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Publish to Redis</title>
</head>
<body>
  <h2>Publish Message to Redis</h2>
  <form id="publishForm">
    <label for="message">Message:</label><br>
    <input type="text" id="message" name="message" required><br><br>
    <button type="submit">Publish</button>
  </form>

  <p id="response"></p>

  <script>
    document.getElementById("publishForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const message = document.getElementById("message").value;

      fetch("https://mobileapi-fbpw.onrender.com/api/redis/publish", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Accept": "*/*"
        },
        body: JSON.stringify(message) // sending raw string
      })
      .then(response => {
        if (!response.ok) {
          throw new Error("Network response was not ok");
        }
        return response.text(); // if response is not JSON
      })
      .then(data => {
        document.getElementById("response").textContent = "Published: " + data;
      })
      .catch(error => {
        document.getElementById("response").textContent = "Error: " + error;
      });
    });
  </script>
</body>
</html>
